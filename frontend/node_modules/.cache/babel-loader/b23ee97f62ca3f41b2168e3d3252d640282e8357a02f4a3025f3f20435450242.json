{"ast":null,"code":"var _jsxFileName = \"D:\\\\intelligent translator\\\\frontend\\\\src\\\\pages\\\\WorkspacePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport { getConversationById, addMessageToConversation, updateConversationSettings, callTextToSpeechApi, editMessage, deleteMessage, exportConversation, transcribeAudio, getPrompts } from '../apiClient';\nimport { FaPaperPlane, FaVolumeUp, FaSpinner, FaExchangeAlt, FaCog, FaTimes, FaEdit, FaTrash, FaCopy, FaDownload, FaShareAlt, FaFileExport, FaMicrophone, FaStop, FaPaperclip } from 'react-icons/fa';\nimport './WorkspacePage.scss';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst sourceLanguages = [{\n  code: 'auto',\n  name: 'اكتشاف تلقائي'\n}, {\n  code: 'ar',\n  name: 'العربية'\n}, {\n  code: 'en',\n  name: 'English'\n}, {\n  code: 'fr',\n  name: 'Français'\n}, {\n  code: 'de',\n  name: 'Deutsch'\n}, {\n  code: 'es',\n  name: 'Español'\n}];\nconst targetLanguages = [{\n  code: 'en',\n  name: 'English'\n}, {\n  code: 'ar',\n  name: 'العربية'\n}, {\n  code: 'fr',\n  name: 'Français'\n}, {\n  code: 'de',\n  name: 'Deutsch'\n}, {\n  code: 'es',\n  name: 'Español'\n}];\nconst highlightText = (text, query) => {\n  if (!query) {\n    return text;\n  }\n  const parts = text.split(new RegExp(`(${query})`, 'gi'));\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    children: parts.map((part, index) => part.toLowerCase() === query.toLowerCase() ? /*#__PURE__*/_jsxDEV(\"mark\", {\n      children: part\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }, this) : part)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\nfunction WorkspacePage() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const [conversation, setConversation] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isTranscribing, setIsTranscribing] = useState(false);\n  const [error, setError] = useState('');\n  const [playingAudioId, setPlayingAudioId] = useState(null);\n  const [sourceLang, setSourceLang] = useState('auto');\n  const [targetLang, setTargetLang] = useState('en');\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false);\n  const [currentUseContext, setCurrentUseContext] = useState(true);\n  const [currentCustomPrompt, setCurrentCustomPrompt] = useState('');\n  const [saveSettingsStatus, setSaveSettingsStatus] = useState('');\n  const [editingMessage, setEditingMessage] = useState({\n    id: null,\n    text: ''\n  });\n  const [messageSearchQuery, setMessageSearchQuery] = useState('');\n  const [copiedMessageId, setCopiedMessageId] = useState(null);\n  const [isRecording, setIsRecording] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const micButtonRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const [promptLibrary, setPromptLibrary] = useState([]);\n  const messagesEndRef = useRef(null);\n  const audioRef = useRef(null);\n  useEffect(() => {\n    const fetchConversation = async () => {\n      try {\n        const response = await getConversationById(id);\n        setConversation(response.data);\n        setMessages(response.data.messages);\n        setCurrentUseContext(response.data.use_context);\n        setCurrentCustomPrompt(response.data.custom_prompt || '');\n      } catch (err) {\n        setError('فشل في تحميل المحادثة.');\n        console.error(err);\n      }\n    };\n    if (id) {\n      fetchConversation();\n    }\n  }, [id]);\n  useEffect(() => {\n    if (!messageSearchQuery) {\n      var _messagesEndRef$curre;\n      (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    }\n  }, [messages, messageSearchQuery]);\n  useEffect(() => {\n    const button = micButtonRef.current;\n    if (button) {\n      const handleTouchStart = e => {\n        handleStartRecording(e);\n      };\n      button.addEventListener('touchstart', handleTouchStart, {\n        passive: false\n      });\n      return () => {\n        button.removeEventListener('touchstart', handleTouchStart);\n      };\n    }\n  }, [isRecording]);\n  useEffect(() => {\n    if (isSettingsOpen) {\n      const fetchPromptLibrary = async () => {\n        try {\n          const response = await getPrompts();\n          setPromptLibrary(response.data);\n        } catch (err) {\n          console.error(\"Failed to fetch prompt library\", err);\n        }\n      };\n      fetchPromptLibrary();\n    }\n  }, [isSettingsOpen]);\n  const handleSwapLanguages = () => {\n    if (sourceLang === 'auto') return;\n    const newSourceLang = targetLang;\n    const newTargetLang = sourceLang;\n    setSourceLang(newSourceLang);\n    setTargetLang(newTargetLang);\n  };\n  const handleTranslate = async e => {\n    if (e) e.preventDefault();\n    if (!inputText.trim() || isLoading) return;\n    const tempId = Date.now();\n    const optimisticMessage = {\n      id: tempId,\n      original_text: inputText,\n      translated_text: \"جاري الترجمة...\",\n      created_at: new Date().toISOString(),\n      status: 'pending'\n    };\n    setMessages(prevMessages => [...prevMessages, optimisticMessage]);\n    setInputText('');\n    setIsLoading(true);\n    setError('');\n    try {\n      var _targetLanguages$find;\n      const targetLanguageName = ((_targetLanguages$find = targetLanguages.find(lang => lang.code === targetLang)) === null || _targetLanguages$find === void 0 ? void 0 : _targetLanguages$find.name) || 'English';\n      const response = await addMessageToConversation(id, optimisticMessage.original_text, targetLanguageName);\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === tempId ? response.data : msg));\n    } catch (apiError) {\n      var _apiError$response, _apiError$response$da;\n      console.error(\"API call failed:\", apiError);\n      const errorDetail = ((_apiError$response = apiError.response) === null || _apiError$response === void 0 ? void 0 : (_apiError$response$da = _apiError$response.data) === null || _apiError$response$da === void 0 ? void 0 : _apiError$response$da.detail) || \"فشل في إرسال الرسالة.\";\n      setError(errorDetail);\n      setMessages(prevMessages => prevMessages.map(msg => msg.id === tempId ? {\n        ...msg,\n        status: 'error',\n        translated_text: 'فشلت الترجمة'\n      } : msg));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleDeleteMessage = async messageId => {\n    if (window.confirm('هل أنت متأكد من حذف هذه الرسالة؟')) {\n      try {\n        await deleteMessage(messageId);\n        setMessages(prev => prev.filter(msg => msg.id !== messageId));\n      } catch (err) {\n        setError('فشل في حذف الرسالة.');\n        console.error(err);\n      }\n    }\n  };\n  const handleStartEditing = message => {\n    setEditingMessage({\n      id: message.id,\n      text: message.original_text\n    });\n  };\n  const handleCancelEditing = () => {\n    setEditingMessage({\n      id: null,\n      text: ''\n    });\n  };\n  const handleSaveEdit = async () => {\n    if (!editingMessage.text.trim()) return;\n    setIsLoading(true);\n    try {\n      const response = await editMessage(editingMessage.id, editingMessage.text);\n      setMessages(prev => prev.map(msg => msg.id === editingMessage.id ? response.data : msg));\n      handleCancelEditing();\n    } catch (err) {\n      setError('فشل في تعديل الرسالة.');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handlePlayAudio = async (text, messageId) => {\n    if (playingAudioId === messageId) {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current.currentTime = 0;\n      }\n      setPlayingAudioId(null);\n      return;\n    }\n    setPlayingAudioId(messageId);\n    try {\n      const response = await callTextToSpeechApi(text);\n      const audioBlob = response.data;\n      const audioUrl = URL.createObjectURL(audioBlob);\n      const audio = new Audio(audioUrl);\n      audioRef.current = audio;\n      audio.play();\n      audio.onended = () => {\n        setPlayingAudioId(null);\n      };\n      audio.onerror = e => {\n        console.error(\"Audio playback error:\", e);\n        setError('حدث خطأ أثناء تشغيل الصوت.');\n        setPlayingAudioId(null);\n      };\n    } catch (err) {\n      setError('فشل في توليد الصوت.');\n      setPlayingAudioId(null);\n    }\n  };\n  const handleSaveSettings = async () => {\n    setSaveSettingsStatus('جاري الحفظ...');\n    try {\n      const settingsToUpdate = {\n        use_context: currentUseContext,\n        custom_prompt: currentCustomPrompt\n      };\n      const response = await updateConversationSettings(id, settingsToUpdate);\n      setConversation(response.data);\n      setSaveSettingsStatus('تم الحفظ بنجاح!');\n      setTimeout(() => {\n        setIsSettingsOpen(false);\n        setSaveSettingsStatus('');\n      }, 1500);\n    } catch (err) {\n      setSaveSettingsStatus('فشل الحفظ. حاول مرة أخرى.');\n      console.error(\"Failed to save settings:\", err);\n    }\n  };\n  const handleCopyText = (text, messageId) => {\n    navigator.clipboard.writeText(text).then(() => {\n      setCopiedMessageId(messageId);\n      setTimeout(() => setCopiedMessageId(null), 2000);\n    }, err => {\n      console.error('Could not copy text: ', err);\n      setError('فشل نسخ النص.');\n    });\n  };\n  const handleShareText = async text => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: 'ترجمة من المترجم الذكي',\n          text: text\n        });\n      } catch (err) {\n        console.error('Error sharing:', err);\n      }\n    } else {\n      setError('المشاركة غير مدعومة في هذا المتصفح.');\n    }\n  };\n  const handleDownloadAudio = async text => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const response = await callTextToSpeechApi(text);\n      const audioBlob = response.data;\n      const url = window.URL.createObjectURL(audioBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `translation-${Date.now()}.mp3`);\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      setError('فشل في تنزيل الملف الصوتي.');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleExport = async () => {\n    try {\n      const response = await exportConversation(id);\n      const textBlob = new Blob([response.data], {\n        type: 'text/plain;charset=utf-8'\n      });\n      const url = window.URL.createObjectURL(textBlob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `${conversation.title.replace(/\\s/g, '_')}.txt`);\n      document.body.appendChild(link);\n      link.click();\n      link.parentNode.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      setError('فشل في تصدير المحادثة.');\n      console.error(\"Failed to export conversation:\", err);\n    }\n  };\n  const transcribeFile = async file => {\n    if (!file) return;\n    setIsTranscribing(true);\n    setError('');\n    try {\n      const response = await transcribeAudio(file);\n      setInputText(prev => prev.trim() ? prev + ' ' + response.data.transcribed_text : response.data.transcribed_text);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      const errorDetail = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'فشل في تحويل الصوت إلى نص.';\n      setError(errorDetail);\n      console.error(\"Transcription failed:\", err);\n    } finally {\n      setIsTranscribing(false);\n    }\n  };\n  const handleStartRecording = async e => {\n    e.preventDefault();\n    setError('');\n    if (isRecording || isTranscribing) return;\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({\n          audio: true\n        });\n        setIsRecording(true);\n        mediaRecorderRef.current = new MediaRecorder(stream);\n        mediaRecorderRef.current.ondataavailable = event => {\n          audioChunksRef.current.push(event.data);\n        };\n        mediaRecorderRef.current.onstop = async () => {\n          const audioBlob = new Blob(audioChunksRef.current, {\n            type: 'audio/webm'\n          });\n          audioChunksRef.current = [];\n          stream.getTracks().forEach(track => track.stop());\n          if (audioBlob.size > 0) {\n            await transcribeFile(audioBlob);\n          }\n        };\n        mediaRecorderRef.current.start();\n      } catch (err) {\n        console.error(\"Error accessing microphone:\", err);\n        setError(\"لا يمكن الوصول إلى الميكروفون. يرجى التحقق من الأذونات.\");\n        setIsRecording(false);\n      }\n    } else {\n      setError(\"المتصفح لا يدعم التسجيل الصوتي.\");\n    }\n  };\n  const handleStopRecording = e => {\n    e.preventDefault();\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n    }\n  };\n  const handleFileSelect = event => {\n    const file = event.target.files[0];\n    if (file) {\n      transcribeFile(file);\n    }\n    event.target.value = null;\n  };\n  const handleUploadClick = () => {\n    if (isTranscribing) return;\n    fileInputRef.current.click();\n  };\n  const renderInputActions = () => {\n    if (isTranscribing) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"mic-button\",\n        disabled: true,\n        children: /*#__PURE__*/_jsxDEV(FaSpinner, {\n          className: \"fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 17\n      }, this);\n    }\n    if (inputText.trim()) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"translate-button\",\n        disabled: isLoading,\n        children: isLoading ? /*#__PURE__*/_jsxDEV(FaSpinner, {\n          className: \"fa-spin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 34\n        }, this) : /*#__PURE__*/_jsxDEV(FaPaperPlane, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 69\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"mic-button\",\n        onClick: handleUploadClick,\n        title: \"\\u062A\\u062D\\u0645\\u064A\\u0644 \\u0645\\u0644\\u0641 \\u0635\\u0648\\u062A\\u064A\",\n        children: /*#__PURE__*/_jsxDEV(FaPaperclip, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        ref: micButtonRef,\n        type: \"button\",\n        className: `mic-button ${isRecording ? 'recording' : ''}`,\n        onMouseDown: handleStartRecording,\n        onMouseUp: handleStopRecording,\n        onTouchEnd: handleStopRecording,\n        title: \"\\u0627\\u0636\\u063A\\u0637 \\u0628\\u0627\\u0633\\u062A\\u0645\\u0631\\u0627\\u0631 \\u0644\\u0644\\u062A\\u0633\\u062C\\u064A\\u0644\",\n        children: isRecording ? /*#__PURE__*/_jsxDEV(FaStop, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 36\n        }, this) : /*#__PURE__*/_jsxDEV(FaMicrophone, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  };\n  if (!conversation) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-container\",\n      children: \"\\u062C\\u0627\\u0631\\u064A \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-container workspace-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"workspace-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-top-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: conversation.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"icon-button\",\n              onClick: handleExport,\n              title: \"\\u062A\\u0635\\u062F\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629\",\n              children: /*#__PURE__*/_jsxDEV(FaFileExport, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"icon-button\",\n              onClick: () => setIsSettingsOpen(true),\n              title: \"\\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629\",\n              children: /*#__PURE__*/_jsxDEV(FaCog, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-bottom-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u0627\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0631\\u0633\\u0627\\u0626\\u0644...\",\n            className: \"message-search-bar\",\n            value: messageSearchQuery,\n            onChange: e => setMessageSearchQuery(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 26\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"language-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"language-select\",\n              value: sourceLang,\n              onChange: e => setSourceLang(e.target.value),\n              children: sourceLanguages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: lang.code,\n                children: lang.name\n              }, lang.code, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"swap-languages-button\",\n              onClick: handleSwapLanguages,\n              title: \"\\u062A\\u0628\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0644\\u063A\\u0627\\u062A\",\n              disabled: sourceLang === 'auto',\n              children: /*#__PURE__*/_jsxDEV(FaExchangeAlt, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"language-select\",\n              value: targetLang,\n              onChange: e => setTargetLang(e.target.value),\n              children: targetLanguages.map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: lang.code,\n                children: lang.name\n              }, lang.code, false, {\n                fileName: _jsxFileName,\n                lineNumber: 475,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-history\",\n        children: [messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message-pair ${msg.status || ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message original-message\",\n            children: editingMessage.id === msg.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"edit-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"edit-textarea\",\n                value: editingMessage.text,\n                onChange: e => setEditingMessage({\n                  ...editingMessage,\n                  text: e.target.value\n                }),\n                autoFocus: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-buttons\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"button-primary\",\n                  onClick: handleSaveEdit,\n                  disabled: isLoading,\n                  children: isLoading ? 'جاري...' : 'حفظ'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleCancelEditing,\n                  children: \"\\u0625\\u0644\\u063A\\u0627\\u0621\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"message-content\",\n                children: highlightText(msg.original_text, messageSearchQuery)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleStartEditing(msg),\n                  title: \"\\u062A\\u0639\\u062F\\u064A\\u0644\",\n                  children: /*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 498,\n                    columnNumber: 107\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDeleteMessage(msg.id),\n                  title: \"\\u062D\\u0630\\u0641\",\n                  children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 109\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message translated-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"message-content\",\n              children: [msg.status === 'pending' && /*#__PURE__*/_jsxDEV(FaSpinner, {\n                className: \"fa-spin message-spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 66\n              }, this), highlightText(msg.translated_text, messageSearchQuery)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 33\n            }, this), msg.status !== 'pending' && msg.status !== 'error' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleCopyText(msg.translated_text, msg.id),\n                title: \"\\u0646\\u0633\\u062E \\u0627\\u0644\\u0646\\u0635\",\n                children: copiedMessageId === msg.id ? 'تم النسخ!' : /*#__PURE__*/_jsxDEV(FaCopy, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 512,\n                  columnNumber: 85\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 511,\n                columnNumber: 39\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"play-audio-button\",\n                onClick: () => handlePlayAudio(msg.translated_text, msg.id),\n                title: \"\\u0627\\u0644\\u0627\\u0633\\u062A\\u0645\\u0627\\u0639 \\u0644\\u0644\\u062A\\u0631\\u062C\\u0645\\u0629\",\n                children: playingAudioId === msg.id ? /*#__PURE__*/_jsxDEV(FaSpinner, {\n                  className: \"fa-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 70\n                }, this) : /*#__PURE__*/_jsxDEV(FaVolumeUp, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 106\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDownloadAudio(msg.translated_text),\n                title: \"\\u062A\\u0646\\u0632\\u064A\\u0644 \\u0627\\u0644\\u0635\\u0648\\u062A\",\n                children: /*#__PURE__*/_jsxDEV(FaDownload, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 37\n              }, this), navigator.share && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleShareText(msg.translated_text),\n                title: \"\\u0645\\u0634\\u0627\\u0631\\u0643\\u0629 \\u0627\\u0644\\u0646\\u0635\",\n                children: /*#__PURE__*/_jsxDEV(FaShareAlt, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 39\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 29\n          }, this)]\n        }, msg.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 25\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"status-message error\",\n        onClick: () => setError(''),\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"translation-input-area\",\n        onSubmit: handleTranslate,\n        children: [/*#__PURE__*/_jsxDEV(TextareaAutosize, {\n          className: \"text-area\",\n          value: inputText,\n          onChange: e => setInputText(e.target.value),\n          placeholder: isTranscribing ? \"جاري تفريغ الصوت...\" : \"اكتب النص...\",\n          onKeyDown: e => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              handleTranslate(null);\n            }\n          },\n          minRows: 1,\n          maxRows: 6,\n          cacheMeasurements: true,\n          disabled: isTranscribing\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          ref: fileInputRef,\n          onChange: handleFileSelect,\n          style: {\n            display: 'none'\n          },\n          accept: \"audio/*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 21\n        }, this), renderInputActions()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 13\n    }, this), isSettingsOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close-button\",\n            onClick: () => setIsSettingsOpen(false),\n            children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 109\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u062A\\u0641\\u0639\\u064A\\u0644 \\u0633\\u064A\\u0627\\u0642 \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"toggle-switch\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: \"context-toggle\",\n              checked: currentUseContext,\n              onChange: e => setCurrentUseContext(e.target.checked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"context-toggle\",\n              className: \"switch-label\",\n              children: \"Toggle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: currentUseContext ? \"مفعل\" : \"معطل\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"description\",\n            children: \"\\u0639\\u0646\\u062F \\u0627\\u0644\\u062A\\u0641\\u0639\\u064A\\u0644\\u060C \\u0633\\u064A\\u062A\\u0645 \\u0625\\u0631\\u0633\\u0627\\u0644 \\u0627\\u0644\\u0631\\u0633\\u0627\\u0626\\u0644 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\\u0629 \\u0645\\u0639 \\u0643\\u0644 \\u0637\\u0644\\u0628 \\u062C\\u062F\\u064A\\u062F \\u0644\\u062A\\u062D\\u0633\\u064A\\u0646 \\u062F\\u0642\\u0629 \\u0627\\u0644\\u062A\\u0631\\u062C\\u0645\\u0629.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"custom-prompt-select\",\n            children: \"\\u0628\\u0631\\u0648\\u0645\\u0628\\u062A \\u0645\\u062E\\u0635\\u0635\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"custom-prompt-select\",\n            className: \"form-input\",\n            value: currentCustomPrompt,\n            onChange: e => setCurrentCustomPrompt(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0628\\u062F\\u0648\\u0646 \\u0628\\u0631\\u0648\\u0645\\u0628\\u062A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 33\n            }, this), promptLibrary.map(prompt => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: prompt.content,\n              children: prompt.title\n            }, prompt.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 37\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"description\",\n            children: \"\\u0627\\u062E\\u062A\\u0631 \\u0628\\u0631\\u0648\\u0645\\u0628\\u062A \\u062C\\u0627\\u0647\\u0632 \\u0645\\u0646 \\u0645\\u0643\\u062A\\u0628\\u062A\\u0643 \\u0644\\u062A\\u0637\\u0628\\u064A\\u0642\\u0647 \\u0639\\u0644\\u0649 \\u0647\\u0630\\u0647 \\u0627\\u0644\\u0645\\u062D\\u0627\\u062F\\u062B\\u0629.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-primary\",\n          onClick: handleSaveSettings,\n          children: \"\\u062D\\u0641\\u0638 \\u0627\\u0644\\u0625\\u0639\\u062F\\u0627\\u062F\\u0627\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 25\n        }, this), saveSettingsStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"status-message\",\n          style: {\n            color: 'green'\n          },\n          children: saveSettingsStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 48\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n_s(WorkspacePage, \"/welFLmU0VPzAzFvxc74C9zeWF8=\", false, function () {\n  return [useParams];\n});\n_c = WorkspacePage;\nexport default WorkspacePage;\nvar _c;\n$RefreshReg$(_c, \"WorkspacePage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","TextareaAutosize","getConversationById","addMessageToConversation","updateConversationSettings","callTextToSpeechApi","editMessage","deleteMessage","exportConversation","transcribeAudio","getPrompts","FaPaperPlane","FaVolumeUp","FaSpinner","FaExchangeAlt","FaCog","FaTimes","FaEdit","FaTrash","FaCopy","FaDownload","FaShareAlt","FaFileExport","FaMicrophone","FaStop","FaPaperclip","jsxDEV","_jsxDEV","Fragment","_Fragment","sourceLanguages","code","name","targetLanguages","highlightText","text","query","parts","split","RegExp","children","map","part","index","toLowerCase","fileName","_jsxFileName","lineNumber","columnNumber","WorkspacePage","_s","id","conversation","setConversation","messages","setMessages","inputText","setInputText","isLoading","setIsLoading","isTranscribing","setIsTranscribing","error","setError","playingAudioId","setPlayingAudioId","sourceLang","setSourceLang","targetLang","setTargetLang","isSettingsOpen","setIsSettingsOpen","currentUseContext","setCurrentUseContext","currentCustomPrompt","setCurrentCustomPrompt","saveSettingsStatus","setSaveSettingsStatus","editingMessage","setEditingMessage","messageSearchQuery","setMessageSearchQuery","copiedMessageId","setCopiedMessageId","isRecording","setIsRecording","mediaRecorderRef","audioChunksRef","micButtonRef","fileInputRef","promptLibrary","setPromptLibrary","messagesEndRef","audioRef","fetchConversation","response","data","use_context","custom_prompt","err","console","_messagesEndRef$curre","current","scrollIntoView","behavior","button","handleTouchStart","e","handleStartRecording","addEventListener","passive","removeEventListener","fetchPromptLibrary","handleSwapLanguages","newSourceLang","newTargetLang","handleTranslate","preventDefault","trim","tempId","Date","now","optimisticMessage","original_text","translated_text","created_at","toISOString","status","prevMessages","_targetLanguages$find","targetLanguageName","find","lang","msg","apiError","_apiError$response","_apiError$response$da","errorDetail","detail","handleDeleteMessage","messageId","window","confirm","prev","filter","handleStartEditing","message","handleCancelEditing","handleSaveEdit","handlePlayAudio","pause","currentTime","audioBlob","audioUrl","URL","createObjectURL","audio","Audio","play","onended","onerror","handleSaveSettings","settingsToUpdate","setTimeout","handleCopyText","navigator","clipboard","writeText","then","handleShareText","share","title","handleDownloadAudio","url","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","revokeObjectURL","handleExport","textBlob","Blob","type","replace","transcribeFile","file","transcribed_text","_err$response","_err$response$data","mediaDevices","getUserMedia","stream","MediaRecorder","ondataavailable","event","push","onstop","getTracks","forEach","track","stop","size","start","handleStopRecording","handleFileSelect","target","files","value","handleUploadClick","renderInputActions","className","disabled","onClick","ref","onMouseDown","onMouseUp","onTouchEnd","placeholder","onChange","autoFocus","onSubmit","onKeyDown","key","shiftKey","minRows","maxRows","cacheMeasurements","style","display","accept","checked","htmlFor","prompt","content","color","_c","$RefreshReg$"],"sources":["D:/intelligent translator/frontend/src/pages/WorkspacePage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport { \r\n  getConversationById, \r\n  addMessageToConversation, \r\n  updateConversationSettings, \r\n  callTextToSpeechApi,\r\n  editMessage,\r\n  deleteMessage,\r\n  exportConversation,\r\n  transcribeAudio,\r\n  getPrompts\r\n} from '../apiClient';\r\nimport { \r\n  FaPaperPlane, FaVolumeUp, FaSpinner, FaExchangeAlt, \r\n  FaCog, FaTimes, FaEdit, FaTrash,\r\n  FaCopy, FaDownload, FaShareAlt,\r\n  FaFileExport, FaMicrophone, FaStop, FaPaperclip\r\n} from 'react-icons/fa';\r\nimport './WorkspacePage.scss';\r\n\r\nconst sourceLanguages = [\r\n    { code: 'auto', name: 'اكتشاف تلقائي' },\r\n    { code: 'ar', name: 'العربية' },\r\n    { code: 'en', name: 'English' },\r\n    { code: 'fr', name: 'Français' },\r\n    { code: 'de', name: 'Deutsch' },\r\n    { code: 'es', name: 'Español' },\r\n];\r\nconst targetLanguages = [\r\n    { code: 'en', name: 'English' },\r\n    { code: 'ar', name: 'العربية' },\r\n    { code: 'fr', name: 'Français' },\r\n    { code: 'de', name: 'Deutsch' },\r\n    { code: 'es', name: 'Español' },\r\n];\r\nconst highlightText = (text, query) => {\r\n  if (!query) {\r\n    return text;\r\n  }\r\n  const parts = text.split(new RegExp(`(${query})`, 'gi'));\r\n  return (\r\n    <span>\r\n      {parts.map((part, index) =>\r\n        part.toLowerCase() === query.toLowerCase() ? (\r\n          <mark key={index}>{part}</mark>\r\n        ) : (\r\n          part\r\n        )\r\n      )}\r\n    </span>\r\n  );\r\n};\r\n\r\n\r\nfunction WorkspacePage() {\r\n    const { id } = useParams();\r\n    const [conversation, setConversation] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [inputText, setInputText] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isTranscribing, setIsTranscribing] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [playingAudioId, setPlayingAudioId] = useState(null);\r\n    const [sourceLang, setSourceLang] = useState('auto');\r\n    const [targetLang, setTargetLang] = useState('en');\r\n\r\n    const [isSettingsOpen, setIsSettingsOpen] = useState(false);\r\n    const [currentUseContext, setCurrentUseContext] = useState(true);\r\n    const [currentCustomPrompt, setCurrentCustomPrompt] = useState('');\r\n    const [saveSettingsStatus, setSaveSettingsStatus] = useState('');\r\n    const [editingMessage, setEditingMessage] = useState({ id: null, text: '' });\r\n    const [messageSearchQuery, setMessageSearchQuery] = useState('');\r\n    const [copiedMessageId, setCopiedMessageId] = useState(null);\r\n    \r\n    const [isRecording, setIsRecording] = useState(false);\r\n    const mediaRecorderRef = useRef(null);\r\n    const audioChunksRef = useRef([]);\r\n    const micButtonRef = useRef(null);\r\n    const fileInputRef = useRef(null);\r\n\r\n    const [promptLibrary, setPromptLibrary] = useState([]);\r\n    const messagesEndRef = useRef(null);\r\n    const audioRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const fetchConversation = async () => {\r\n            try {\r\n                const response = await getConversationById(id);\r\n                setConversation(response.data);\r\n                setMessages(response.data.messages);\r\n                setCurrentUseContext(response.data.use_context);\r\n                setCurrentCustomPrompt(response.data.custom_prompt || '');\r\n            } catch (err) {\r\n                setError('فشل في تحميل المحادثة.');\r\n                console.error(err);\r\n            }\r\n        };\r\n        if (id) {\r\n            fetchConversation();\r\n        }\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        if (!messageSearchQuery) {\r\n            messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n        }\r\n    }, [messages, messageSearchQuery]);\r\n\r\n    useEffect(() => {\r\n        const button = micButtonRef.current;\r\n        if (button) {\r\n            const handleTouchStart = (e) => {\r\n                handleStartRecording(e);\r\n            };\r\n\r\n            button.addEventListener('touchstart', handleTouchStart, { passive: false });\r\n\r\n            return () => {\r\n                button.removeEventListener('touchstart', handleTouchStart);\r\n            };\r\n        }\r\n    }, [isRecording]);\r\n\r\n    useEffect(() => {\r\n      if (isSettingsOpen) {\r\n        const fetchPromptLibrary = async () => {\r\n          try {\r\n            const response = await getPrompts();\r\n            setPromptLibrary(response.data);\r\n          } catch (err) {\r\n            console.error(\"Failed to fetch prompt library\", err);\r\n           }\r\n        };\r\n        fetchPromptLibrary();\r\n      }\r\n    }, [isSettingsOpen]);\r\n\r\n    const handleSwapLanguages = () => {\r\n        if (sourceLang === 'auto') return;\r\n        const newSourceLang = targetLang;\r\n        const newTargetLang = sourceLang;\r\n        setSourceLang(newSourceLang);\r\n        setTargetLang(newTargetLang);\r\n    };\r\n\r\n    const handleTranslate = async (e) => {\r\n        if (e) e.preventDefault();\r\n        if (!inputText.trim() || isLoading) return;\r\n\r\n        const tempId = Date.now();\r\n        const optimisticMessage = {\r\n            id: tempId,\r\n            original_text: inputText,\r\n            translated_text: \"جاري الترجمة...\",\r\n            created_at: new Date().toISOString(),\r\n            status: 'pending'\r\n        };\r\n\r\n        setMessages(prevMessages => [...prevMessages, optimisticMessage]);\r\n        setInputText('');\r\n        setIsLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const targetLanguageName = targetLanguages.find(lang => lang.code === targetLang)?.name || 'English';\r\n            const response = await addMessageToConversation(id, optimisticMessage.original_text, targetLanguageName);\r\n            setMessages(prevMessages => \r\n                prevMessages.map(msg => msg.id === tempId ? response.data : msg)\r\n            );\r\n        } catch (apiError) {\r\n            console.error(\"API call failed:\", apiError);\r\n            const errorDetail = apiError.response?.data?.detail || \"فشل في إرسال الرسالة.\";\r\n            setError(errorDetail);\r\n            setMessages(prevMessages => \r\n                prevMessages.map(msg => msg.id === tempId ? { ...msg, status: 'error', translated_text: 'فشلت الترجمة' } : msg)\r\n            );\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDeleteMessage = async (messageId) => {\r\n        if (window.confirm('هل أنت متأكد من حذف هذه الرسالة؟')) {\r\n            try {\r\n                await deleteMessage(messageId);\r\n                setMessages(prev => prev.filter(msg => msg.id !== messageId));\r\n            } catch (err) {\r\n                setError('فشل في حذف الرسالة.');\r\n                console.error(err);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleStartEditing = (message) => {\r\n        setEditingMessage({ id: message.id, text: message.original_text });\r\n    };\r\n\r\n    const handleCancelEditing = () => {\r\n        setEditingMessage({ id: null, text: '' });\r\n    };\r\n\r\n    const handleSaveEdit = async () => {\r\n        if (!editingMessage.text.trim()) return;\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await editMessage(editingMessage.id, editingMessage.text);\r\n            setMessages(prev => prev.map(msg => msg.id === editingMessage.id ? response.data : msg));\r\n            handleCancelEditing();\r\n        } catch (err) {\r\n            setError('فشل في تعديل الرسالة.');\r\n            console.error(err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handlePlayAudio = async (text, messageId) => {\r\n        if (playingAudioId === messageId) {\r\n            if (audioRef.current) {\r\n                audioRef.current.pause();\r\n                audioRef.current.currentTime = 0;\r\n            }\r\n            setPlayingAudioId(null);\r\n            return;\r\n        }\r\n\r\n        setPlayingAudioId(messageId);\r\n        try {\r\n            const response = await callTextToSpeechApi(text);\r\n            const audioBlob = response.data;\r\n            const audioUrl = URL.createObjectURL(audioBlob);\r\n            const audio = new Audio(audioUrl);\r\n            audioRef.current = audio;\r\n            audio.play();\r\n            audio.onended = () => { setPlayingAudioId(null); };\r\n            audio.onerror = (e) => {\r\n                console.error(\"Audio playback error:\", e);\r\n                setError('حدث خطأ أثناء تشغيل الصوت.');\r\n                setPlayingAudioId(null);\r\n            }\r\n        } catch (err) {\r\n            setError('فشل في توليد الصوت.');\r\n            setPlayingAudioId(null);\r\n        }\r\n    };\r\n\r\n    const handleSaveSettings = async () => {\r\n        setSaveSettingsStatus('جاري الحفظ...');\r\n        try {\r\n            const settingsToUpdate = {\r\n                use_context: currentUseContext,\r\n                custom_prompt: currentCustomPrompt,\r\n            };\r\n            const response = await updateConversationSettings(id, settingsToUpdate);\r\n            setConversation(response.data);\r\n            setSaveSettingsStatus('تم الحفظ بنجاح!');\r\n            setTimeout(() => {\r\n                setIsSettingsOpen(false);\r\n                setSaveSettingsStatus('');\r\n            }, 1500);\r\n        } catch (err) {\r\n            setSaveSettingsStatus('فشل الحفظ. حاول مرة أخرى.');\r\n            console.error(\"Failed to save settings:\", err);\r\n        }\r\n    };\r\n\r\n    const handleCopyText = (text, messageId) => {\r\n        navigator.clipboard.writeText(text).then(() => {\r\n            setCopiedMessageId(messageId);\r\n            setTimeout(() => setCopiedMessageId(null), 2000);\r\n        }, (err) => {\r\n            console.error('Could not copy text: ', err);\r\n            setError('فشل نسخ النص.');\r\n        });\r\n    };\r\n\r\n    const handleShareText = async (text) => {\r\n        if (navigator.share) {\r\n            try {\r\n                await navigator.share({\r\n                    title: 'ترجمة من المترجم الذكي',\r\n                    text: text,\r\n                });\r\n            } catch (err) {\r\n                console.error('Error sharing:', err);\r\n            }\r\n        } else {\r\n            setError('المشاركة غير مدعومة في هذا المتصفح.');\r\n        }\r\n    };\r\n\r\n    const handleDownloadAudio = async (text) => {\r\n        setIsLoading(true);\r\n        setError('');\r\n        try {\r\n            const response = await callTextToSpeechApi(text);\r\n            const audioBlob = response.data;\r\n            const url = window.URL.createObjectURL(audioBlob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', `translation-${Date.now()}.mp3`);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            link.parentNode.removeChild(link);\r\n            window.URL.revokeObjectURL(url);\r\n        } catch (err) {\r\n            setError('فشل في تنزيل الملف الصوتي.');\r\n            console.error(err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleExport = async () => {\r\n        try {\r\n            const response = await exportConversation(id);\r\n            const textBlob = new Blob([response.data], { type: 'text/plain;charset=utf-8' });\r\n            const url = window.URL.createObjectURL(textBlob);\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', `${conversation.title.replace(/\\s/g, '_')}.txt`);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            link.parentNode.removeChild(link);\r\n            window.URL.revokeObjectURL(url);\r\n        } catch (err) {\r\n            setError('فشل في تصدير المحادثة.');\r\n            console.error(\"Failed to export conversation:\", err);\r\n        }\r\n    };\r\n\r\n    const transcribeFile = async (file) => {\r\n        if (!file) return;\r\n        setIsTranscribing(true);\r\n        setError('');\r\n        try {\r\n            const response = await transcribeAudio(file);\r\n            setInputText(prev => prev.trim() ? prev + ' ' + response.data.transcribed_text : response.data.transcribed_text);\r\n        } catch (err) {\r\n            const errorDetail = err.response?.data?.detail || 'فشل في تحويل الصوت إلى نص.';\r\n            setError(errorDetail);\r\n            console.error(\"Transcription failed:\", err);\r\n        } finally {\r\n            setIsTranscribing(false);\r\n        }\r\n    };\r\n\r\n    const handleStartRecording = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        if (isRecording || isTranscribing) return;\r\n        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n            try {\r\n                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n                setIsRecording(true);\r\n                mediaRecorderRef.current = new MediaRecorder(stream);\r\n                mediaRecorderRef.current.ondataavailable = (event) => {\r\n                    audioChunksRef.current.push(event.data);\r\n                };\r\n                mediaRecorderRef.current.onstop = async () => {\r\n                    const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\r\n                    audioChunksRef.current = [];\r\n                    stream.getTracks().forEach(track => track.stop());\r\n                    if(audioBlob.size > 0) {\r\n                        await transcribeFile(audioBlob);\r\n                    }\r\n                };\r\n                mediaRecorderRef.current.start();\r\n            } catch (err) {\r\n                console.error(\"Error accessing microphone:\", err);\r\n                setError(\"لا يمكن الوصول إلى الميكروفون. يرجى التحقق من الأذونات.\");\r\n                setIsRecording(false);\r\n            }\r\n        } else {\r\n            setError(\"المتصفح لا يدعم التسجيل الصوتي.\");\r\n        }\r\n    };\r\n\r\n    const handleStopRecording = (e) => {\r\n        e.preventDefault();\r\n        if (mediaRecorderRef.current && isRecording) {\r\n            mediaRecorderRef.current.stop();\r\n            setIsRecording(false);\r\n        }\r\n    };\r\n\r\n    const handleFileSelect = (event) => {\r\n        const file = event.target.files[0];\r\n        if (file) {\r\n            transcribeFile(file);\r\n        }\r\n        event.target.value = null; \r\n    };\r\n\r\n    const handleUploadClick = () => {\r\n        if (isTranscribing) return;\r\n        fileInputRef.current.click();\r\n    };\r\n\r\n    const renderInputActions = () => {\r\n        if (isTranscribing) {\r\n            return (\r\n                <button type=\"button\" className=\"mic-button\" disabled>\r\n                    <FaSpinner className=\"fa-spin\" />\r\n                </button>\r\n            );\r\n        }\r\n        if (inputText.trim()) {\r\n            return (\r\n                <button type=\"submit\" className=\"translate-button\" disabled={isLoading}>\r\n                    {isLoading ? <FaSpinner className=\"fa-spin\"/> : <FaPaperPlane />}\r\n                </button>\r\n            );\r\n        }\r\n        return (\r\n            <>\r\n                <button type=\"button\" className=\"mic-button\" onClick={handleUploadClick} title=\"تحميل ملف صوتي\">\r\n                    <FaPaperclip />\r\n                </button>\r\n                <button \r\n                    ref={micButtonRef}\r\n                    type=\"button\" \r\n                    className={`mic-button ${isRecording ? 'recording' : ''}`} \r\n                    onMouseDown={handleStartRecording}\r\n                    onMouseUp={handleStopRecording}\r\n                    onTouchEnd={handleStopRecording}\r\n                    title=\"اضغط باستمرار للتسجيل\"\r\n                >\r\n                    {isRecording ? <FaStop /> : <FaMicrophone />}\r\n                </button>\r\n            </>\r\n        );\r\n    };\r\n\r\n    if (!conversation) {\r\n        return <div className=\"page-container\">جاري تحميل المحادثة...</div>;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"page-container workspace-container\">\r\n                <div className=\"workspace-header\">\r\n                    <div className=\"header-top-row\">\r\n                        <h1>{conversation.title}</h1>\r\n                        <div className=\"header-actions\">\r\n                             <button className=\"icon-button\" onClick={handleExport} title=\"تصدير المحادثة\">\r\n                                <FaFileExport />\r\n                            </button>\r\n                            <button className=\"icon-button\" onClick={() => setIsSettingsOpen(true)} title=\"إعدادات المحادثة\">\r\n                                <FaCog />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"header-bottom-row\">\r\n                         <input \r\n                            type=\"text\"\r\n                            placeholder=\"ابحث في الرسائل...\"\r\n                            className=\"message-search-bar\"\r\n                            value={messageSearchQuery}\r\n                            onChange={(e) => setMessageSearchQuery(e.target.value)}\r\n                        />\r\n                        <div className=\"language-controls\">\r\n                            <select className=\"language-select\" value={sourceLang} onChange={(e) => setSourceLang(e.target.value)}>\r\n                                {sourceLanguages.map(lang => (\r\n                                    <option key={lang.code} value={lang.code}>{lang.name}</option>\r\n                                ))}\r\n                            </select>\r\n                            <button className=\"swap-languages-button\" onClick={handleSwapLanguages} title=\"تبديل اللغات\" disabled={sourceLang === 'auto'}>\r\n                                <FaExchangeAlt />\r\n                            </button>\r\n                             <select className=\"language-select\" value={targetLang} onChange={(e) => setTargetLang(e.target.value)}>\r\n                                {targetLanguages.map(lang => (\r\n                                    <option key={lang.code} value={lang.code}>{lang.name}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"message-history\">\r\n                    {messages.map((msg) => (\r\n                        <div key={msg.id} className={`message-pair ${msg.status || ''}`}>\r\n                            <div className=\"message original-message\">\r\n                                {editingMessage.id === msg.id ? (\r\n                                    <div className=\"edit-container\">\r\n                                        <textarea className=\"edit-textarea\" value={editingMessage.text} onChange={(e) => setEditingMessage({ ...editingMessage, text: e.target.value })} autoFocus />\r\n                                        <div className=\"edit-buttons\">\r\n                                            <button className=\"button-primary\" onClick={handleSaveEdit} disabled={isLoading}>{isLoading ? 'جاري...' : 'حفظ'}</button>\r\n                                            <button onClick={handleCancelEditing}>إلغاء</button>\r\n                                        </div>\r\n                                    </div>\r\n                                ) : (\r\n                                    <>\r\n                                        <span className=\"message-content\">{highlightText(msg.original_text, messageSearchQuery)}</span>\r\n                                        <div className=\"message-actions\">\r\n                                            <button onClick={() => handleStartEditing(msg)} title=\"تعديل\"><FaEdit /></button>\r\n                                            <button onClick={() => handleDeleteMessage(msg.id)} title=\"حذف\"><FaTrash /></button>\r\n                                        </div>\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"message translated-message\">\r\n                                <span className=\"message-content\">\r\n                                    {msg.status === 'pending' && <FaSpinner className=\"fa-spin message-spinner\" />}\r\n                                    {highlightText(msg.translated_text, messageSearchQuery)}\r\n                                </span>\r\n                                {msg.status !== 'pending' && msg.status !== 'error' && (\r\n                                  <div className=\"message-actions\">\r\n                                      <button onClick={() => handleCopyText(msg.translated_text, msg.id)} title=\"نسخ النص\">\r\n                                        {copiedMessageId === msg.id ? 'تم النسخ!' : <FaCopy />}\r\n                                    </button>\r\n                                    <button className=\"play-audio-button\" onClick={() => handlePlayAudio(msg.translated_text, msg.id)} title=\"الاستماع للترجمة\">\r\n                                        {playingAudioId === msg.id ? <FaSpinner className=\"fa-spin\" /> : <FaVolumeUp />}\r\n                                    </button>\r\n                                    <button onClick={() => handleDownloadAudio(msg.translated_text)} title=\"تنزيل الصوت\">\r\n                                        <FaDownload />\r\n                                    </button>\r\n                                    {navigator.share && (\r\n                                      <button onClick={() => handleShareText(msg.translated_text)} title=\"مشاركة النص\">\r\n                                            <FaShareAlt />\r\n                                        </button>\r\n                                    )}\r\n                                  </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                    <div ref={messagesEndRef} />\r\n                </div>\r\n\r\n                {error && <div className=\"status-message error\" onClick={() => setError('')}>{error}</div>}\r\n                \r\n                <form className=\"translation-input-area\" onSubmit={handleTranslate}>\r\n                    <TextareaAutosize \r\n                        className=\"text-area\" \r\n                        value={inputText} \r\n                        onChange={(e) => setInputText(e.target.value)} \r\n                        placeholder={isTranscribing ? \"جاري تفريغ الصوت...\" : \"اكتب النص...\"}\r\n                        onKeyDown={(e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); handleTranslate(null); } }} \r\n                        minRows={1}\r\n                        maxRows={6}\r\n                        cacheMeasurements\r\n                        disabled={isTranscribing}\r\n                    />\r\n                    \r\n                    <input\r\n                        type=\"file\"\r\n                        ref={fileInputRef}\r\n                        onChange={handleFileSelect}\r\n                        style={{ display: 'none' }}\r\n                        accept=\"audio/*\"\r\n                    />\r\n                    \r\n                    {renderInputActions()}\r\n\r\n                </form>\r\n            </div>\r\n            {isSettingsOpen && (\r\n                <div className=\"modal-overlay\">\r\n                    <div className=\"modal-content\">\r\n                        <div className=\"modal-header\">\r\n                            <h2>إعدادات المحادثة</h2>\r\n                            <button className=\"modal-close-button\" onClick={() => setIsSettingsOpen(false)}><FaTimes /></button>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>تفعيل سياق المحادثة</label>\r\n                            <div className=\"toggle-switch\">\r\n                                <input type=\"checkbox\" id=\"context-toggle\" checked={currentUseContext} onChange={(e) => setCurrentUseContext(e.target.checked)} />\r\n                                <label htmlFor=\"context-toggle\" className=\"switch-label\">Toggle</label>\r\n                                <span>{currentUseContext ? \"مفعل\" : \"معطل\"}</span>\r\n                            </div>\r\n                            <p className=\"description\">عند التفعيل، سيتم إرسال الرسائل السابقة مع كل طلب جديد لتحسين دقة الترجمة.</p>\r\n                        </div>\r\n                         \r\n                        <div className=\"form-group\">\r\n                            <label htmlFor=\"custom-prompt-select\">برومبت مخصص</label>\r\n                            <select \r\n                                id=\"custom-prompt-select\"\r\n                                className=\"form-input\"\r\n                                value={currentCustomPrompt}\r\n                                onChange={(e) => setCurrentCustomPrompt(e.target.value)}\r\n                            >\r\n                                <option value=\"\">بدون برومبت</option>\r\n                                {promptLibrary.map(prompt => (\r\n                                    <option key={prompt.id} value={prompt.content}>\r\n                                        {prompt.title}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                            <p className=\"description\">اختر برومبت جاهز من مكتبتك لتطبيقه على هذه المحادثة.</p>\r\n                        </div>\r\n\r\n                        <button className=\"button-primary\" onClick={handleSaveSettings}>حفظ الإعدادات</button>\r\n                        {saveSettingsStatus && <p className=\"status-message\" style={{ color: 'green' }}>{saveSettingsStatus}</p>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default WorkspacePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}