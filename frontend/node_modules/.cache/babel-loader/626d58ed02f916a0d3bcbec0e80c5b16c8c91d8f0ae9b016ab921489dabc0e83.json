{"ast":null,"code":"var _jsxFileName = \"D:\\\\intelligent translator\\\\frontend\\\\src\\\\components\\\\settings\\\\PromptManagerModal.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { FaTimes, FaPlus, FaEdit, FaTrash, FaStar, FaRegStar } from 'react-icons/fa';\nimport { getPrompts, createPrompt, updatePrompt, deletePrompt, getSetting, upsertSetting } from '../../apiClient';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction PromptManagerModal({\n  closeModal\n}) {\n  _s2();\n  var _s = $RefreshSig$();\n  // State for the list of all prompts\n  const [prompts, setPrompts] = useState([]);\n  // State for the ID of the default prompt\n  const [defaultPromptId, setDefaultPromptId] = useState(null);\n\n  // State for managing the current view ('list' or 'form')\n  const [view, setView] = useState('list');\n  // State for the prompt being edited (null for new)\n  const [editingPrompt, setEditingPrompt] = useState(null);\n\n  // General loading and status states\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // Function to fetch all data from the backend\n  const fetchData = async () => {\n    setIsLoading(true);\n    setError('');\n    try {\n      const [promptsResponse, defaultPromptResponse] = await Promise.all([getPrompts(), getSetting('default_prompt_id')]);\n      setPrompts(promptsResponse.data);\n      if (defaultPromptResponse.data && defaultPromptResponse.data.value) {\n        setDefaultPromptId(parseInt(defaultPromptResponse.data.value, 10));\n      }\n    } catch (err) {\n      setError('فشل في تحميل البرومبتات.');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Fetch data on component mount\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const handleAddNew = () => {\n    setEditingPrompt(null); // Clear any previous editing state\n    setView('form');\n  };\n  const handleEdit = prompt => {\n    setEditingPrompt(prompt);\n    setView('form');\n  };\n  const handleDelete = async promptId => {\n    if (window.confirm('هل أنت متأكد من حذف هذا البرومبت؟')) {\n      try {\n        await deletePrompt(promptId);\n        // If the deleted prompt was the default, clear the setting\n        if (promptId === defaultPromptId) {\n          await upsertSetting('default_prompt_id', '');\n          setDefaultPromptId(null);\n        }\n        fetchData(); // Refresh the list\n      } catch (err) {\n        setError('فشل في حذف البرومبت.');\n        console.error(err);\n      }\n    }\n  };\n  const handleSetDefault = async promptId => {\n    try {\n      await upsertSetting('default_prompt_id', promptId.toString());\n      setDefaultPromptId(promptId);\n    } catch (err) {\n      setError('فشل في تعيين البرومبت الافتراضي.');\n      console.error(err);\n    }\n  };\n\n  // Render the list view\n  const renderListView = () => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u0645\\u0643\\u062A\\u0628\\u0629 \\u0627\\u0644\\u0628\\u0631\\u0648\\u0645\\u0628\\u062A\\u0627\\u062A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-primary\",\n        onClick: handleAddNew,\n        children: [/*#__PURE__*/_jsxDEV(FaPlus, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), \" \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0628\\u0631\\u0648\\u0645\\u0628\\u062A \\u062C\\u062F\\u064A\\u062F\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"status-message error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"prompt-list\",\n      children: prompts.map(prompt => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"prompt-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"prompt-title\",\n          children: prompt.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"prompt-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSetDefault(prompt.id),\n            title: \"\\u062A\\u0639\\u064A\\u064A\\u0646 \\u0643\\u0627\\u0641\\u062A\\u0631\\u0627\\u0636\\u064A\",\n            children: defaultPromptId === prompt.id ? /*#__PURE__*/_jsxDEV(FaStar, {\n              color: \"#ffc107\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 50\n            }, this) : /*#__PURE__*/_jsxDEV(FaRegStar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 79\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEdit(prompt),\n            title: \"\\u062A\\u0639\\u062F\\u064A\\u0644\",\n            children: /*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 72\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(prompt.id),\n            title: \"\\u062D\\u0630\\u0641\",\n            children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, prompt.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), prompts.length === 0 && !isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0628\\u0631\\u0648\\u0645\\u0628\\u062A\\u0627\\u062A \\u0645\\u062D\\u0641\\u0648\\u0638\\u0629. \\u0642\\u0645 \\u0628\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0648\\u0627\\u062D\\u062F \\u062C\\u062F\\u064A\\u062F.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 46\n    }, this)]\n  }, void 0, true);\n\n  // This is a sub-component for the form view\n  const PromptForm = ({\n    existingPrompt,\n    onFormSubmit\n  }) => {\n    _s();\n    const [title, setTitle] = useState(existingPrompt ? existingPrompt.title : '');\n    const [content, setContent] = useState(existingPrompt ? existingPrompt.content : '');\n    const [isSaving, setIsSaving] = useState(false);\n    const handleSubmit = async e => {\n      e.preventDefault();\n      setIsSaving(true);\n      setError('');\n      try {\n        const promptData = {\n          title,\n          content\n        };\n        if (existingPrompt) {\n          await updatePrompt(existingPrompt.id, promptData);\n        } else {\n          await createPrompt(promptData);\n        }\n        onFormSubmit(); // This will trigger a refresh and view switch\n      } catch (err) {\n        setError('فشل في حفظ البرومبت.');\n        console.error(err);\n        setIsSaving(false);\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: existingPrompt ? 'تعديل البرومبت' : 'إضافة برومبت جديد'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"prompt-title\",\n          children: \"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0628\\u0631\\u0648\\u0645\\u0628\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"prompt-title\",\n          type: \"text\",\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          className: \"form-input\",\n          placeholder: \"\\u0645\\u062B\\u0627\\u0644: \\u0645\\u062A\\u0631\\u062C\\u0645 \\u0642\\u0627\\u0646\\u0648\\u0646\\u064A\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"prompt-content\",\n          children: \"\\u0645\\u062D\\u062A\\u0648\\u0649 \\u0627\\u0644\\u0628\\u0631\\u0648\\u0645\\u0628\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"prompt-content\",\n          value: content,\n          onChange: e => setContent(e.target.value),\n          className: \"form-input\",\n          rows: 8,\n          placeholder: \"\\u0645\\u062B\\u0627\\u0644: \\u0623\\u0646\\u062A \\u0645\\u062A\\u0631\\u062C\\u0645 \\u0642\\u0627\\u0646\\u0648\\u0646\\u064A \\u0645\\u062D\\u062A\\u0631\\u0641. \\u0645\\u0647\\u0645\\u062A\\u0643 \\u0647\\u064A \\u062A\\u0631\\u062C\\u0645\\u0629 \\u0627\\u0644\\u0646\\u0635\\u0648\\u0635 \\u0627\\u0644\\u062A\\u0627\\u0644\\u064A\\u0629 \\u0628\\u0623\\u0633\\u0644\\u0648\\u0628 \\u062F\\u0642\\u064A\\u0642 \\u0648\\u0631\\u0633\\u0645\\u064A...\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"status-message error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"button-secondary\",\n          onClick: () => setView('list'),\n          children: \"\\u0625\\u0644\\u063A\\u0627\\u0621\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"button-primary\",\n          disabled: isSaving,\n          children: isSaving ? 'جاري الحفظ...' : 'حفظ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this);\n  };\n  _s(PromptForm, \"uy1gpR4HfsGpn5/ehnEn4ARvXAA=\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content wide\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0628\\u0631\\u0648\\u0645\\u0628\\u062A\\u0627\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"modal-close-button\",\n          onClick: closeModal,\n          children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 22\n      }, this) : view === 'list' ? renderListView() : /*#__PURE__*/_jsxDEV(PromptForm, {\n        existingPrompt: editingPrompt,\n        onFormSubmit: () => {\n          setView('list');\n          fetchData();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 50\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 5\n  }, this);\n}\n_s2(PromptManagerModal, \"NTFzUwDlzGE1RHRYGk8oYiNEosk=\");\n_c = PromptManagerModal;\nexport default PromptManagerModal;\nvar _c;\n$RefreshReg$(_c, \"PromptManagerModal\");","map":{"version":3,"names":["React","useState","useEffect","FaTimes","FaPlus","FaEdit","FaTrash","FaStar","FaRegStar","getPrompts","createPrompt","updatePrompt","deletePrompt","getSetting","upsertSetting","jsxDEV","_jsxDEV","Fragment","_Fragment","PromptManagerModal","closeModal","_s2","_s","$RefreshSig$","prompts","setPrompts","defaultPromptId","setDefaultPromptId","view","setView","editingPrompt","setEditingPrompt","isLoading","setIsLoading","error","setError","fetchData","promptsResponse","defaultPromptResponse","Promise","all","data","value","parseInt","err","console","handleAddNew","handleEdit","prompt","handleDelete","promptId","window","confirm","handleSetDefault","toString","renderListView","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","title","id","color","length","PromptForm","existingPrompt","onFormSubmit","setTitle","content","setContent","isSaving","setIsSaving","handleSubmit","e","preventDefault","promptData","onSubmit","htmlFor","type","onChange","target","placeholder","required","rows","disabled","_c","$RefreshReg$"],"sources":["D:/intelligent translator/frontend/src/components/settings/PromptManagerModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FaTimes, FaPlus, FaEdit, FaTrash, FaStar, FaRegStar } from 'react-icons/fa';\r\nimport { getPrompts, createPrompt, updatePrompt, deletePrompt, getSetting, upsertSetting } from '../../apiClient';\r\n\r\nfunction PromptManagerModal({ closeModal }) {\r\n  // State for the list of all prompts\r\n  const [prompts, setPrompts] = useState([]);\r\n  // State for the ID of the default prompt\r\n  const [defaultPromptId, setDefaultPromptId] = useState(null);\r\n\r\n  // State for managing the current view ('list' or 'form')\r\n  const [view, setView] = useState('list'); \r\n  // State for the prompt being edited (null for new)\r\n  const [editingPrompt, setEditingPrompt] = useState(null); \r\n  \r\n  // General loading and status states\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  // Function to fetch all data from the backend\r\n  const fetchData = async () => {\r\n    setIsLoading(true);\r\n    setError('');\r\n    try {\r\n      const [promptsResponse, defaultPromptResponse] = await Promise.all([\r\n        getPrompts(),\r\n        getSetting('default_prompt_id')\r\n      ]);\r\n      setPrompts(promptsResponse.data);\r\n      if (defaultPromptResponse.data && defaultPromptResponse.data.value) {\r\n        setDefaultPromptId(parseInt(defaultPromptResponse.data.value, 10));\r\n      }\r\n    } catch (err) {\r\n      setError('فشل في تحميل البرومبتات.');\r\n      console.error(err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch data on component mount\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleAddNew = () => {\r\n    setEditingPrompt(null); // Clear any previous editing state\r\n    setView('form');\r\n  };\r\n\r\n  const handleEdit = (prompt) => {\r\n    setEditingPrompt(prompt);\r\n    setView('form');\r\n  };\r\n\r\n  const handleDelete = async (promptId) => {\r\n    if (window.confirm('هل أنت متأكد من حذف هذا البرومبت؟')) {\r\n      try {\r\n        await deletePrompt(promptId);\r\n        // If the deleted prompt was the default, clear the setting\r\n        if (promptId === defaultPromptId) {\r\n            await upsertSetting('default_prompt_id', '');\r\n            setDefaultPromptId(null);\r\n        }\r\n        fetchData(); // Refresh the list\r\n      } catch (err) {\r\n        setError('فشل في حذف البرومبت.');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSetDefault = async (promptId) => {\r\n    try {\r\n      await upsertSetting('default_prompt_id', promptId.toString());\r\n      setDefaultPromptId(promptId);\r\n    } catch (err) {\r\n      setError('فشل في تعيين البرومبت الافتراضي.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  // Render the list view\r\n  const renderListView = () => (\r\n    <>\r\n      <div className=\"modal-actions\">\r\n        <h3>مكتبة البرومبتات</h3>\r\n        <button className=\"button-primary\" onClick={handleAddNew}>\r\n          <FaPlus /> إضافة برومبت جديد\r\n        </button>\r\n      </div>\r\n      {error && <p className=\"status-message error\">{error}</p>}\r\n      <ul className=\"prompt-list\">\r\n        {prompts.map(prompt => (\r\n          <li key={prompt.id} className=\"prompt-item\">\r\n            <span className=\"prompt-title\">{prompt.title}</span>\r\n            <div className=\"prompt-actions\">\r\n              <button onClick={() => handleSetDefault(prompt.id)} title=\"تعيين كافتراضي\">\r\n                {defaultPromptId === prompt.id ? <FaStar color=\"#ffc107\" /> : <FaRegStar />}\r\n              </button>\r\n              <button onClick={() => handleEdit(prompt)} title=\"تعديل\"><FaEdit /></button>\r\n              <button onClick={() => handleDelete(prompt.id)} title=\"حذف\"><FaTrash /></button>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      {prompts.length === 0 && !isLoading && <p>لا توجد برومبتات محفوظة. قم بإضافة واحد جديد.</p>}\r\n    </>\r\n  );\r\n\r\n  // This is a sub-component for the form view\r\n  const PromptForm = ({ existingPrompt, onFormSubmit }) => {\r\n    const [title, setTitle] = useState(existingPrompt ? existingPrompt.title : '');\r\n    const [content, setContent] = useState(existingPrompt ? existingPrompt.content : '');\r\n    const [isSaving, setIsSaving] = useState(false);\r\n\r\n    const handleSubmit = async (e) => {\r\n      e.preventDefault();\r\n      setIsSaving(true);\r\n      setError('');\r\n      try {\r\n        const promptData = { title, content };\r\n        if (existingPrompt) {\r\n          await updatePrompt(existingPrompt.id, promptData);\r\n        } else {\r\n          await createPrompt(promptData);\r\n        }\r\n        onFormSubmit(); // This will trigger a refresh and view switch\r\n      } catch (err) {\r\n        setError('فشل في حفظ البرومبت.');\r\n        console.error(err);\r\n        setIsSaving(false);\r\n      }\r\n    };\r\n\r\n    return (\r\n      <form onSubmit={handleSubmit}>\r\n        <h3>{existingPrompt ? 'تعديل البرومبت' : 'إضافة برومبت جديد'}</h3>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"prompt-title\">عنوان البرومبت</label>\r\n          <input\r\n            id=\"prompt-title\"\r\n            type=\"text\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            className=\"form-input\"\r\n            placeholder=\"مثال: مترجم قانوني\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"prompt-content\">محتوى البرومبت</label>\r\n          <textarea\r\n            id=\"prompt-content\"\r\n            value={content}\r\n            onChange={(e) => setContent(e.target.value)}\r\n            className=\"form-input\"\r\n            rows={8}\r\n            placeholder=\"مثال: أنت مترجم قانوني محترف. مهمتك هي ترجمة النصوص التالية بأسلوب دقيق ورسمي...\"\r\n            required\r\n          />\r\n        </div>\r\n        {error && <p className=\"status-message error\">{error}</p>}\r\n        <div className=\"form-actions\">\r\n          <button type=\"button\" className=\"button-secondary\" onClick={() => setView('list')}>إلغاء</button>\r\n          <button type=\"submit\" className=\"button-primary\" disabled={isSaving}>\r\n            {isSaving ? 'جاري الحفظ...' : 'حفظ'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    );\r\n  };\r\n  \r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content wide\">\r\n        <div className=\"modal-header\">\r\n          <h2>إدارة البرومبتات</h2>\r\n          <button className=\"modal-close-button\" onClick={closeModal}>\r\n            <FaTimes />\r\n          </button>\r\n        </div>\r\n        {isLoading ? <p>جاري التحميل...</p> : (\r\n            view === 'list' ? renderListView() : <PromptForm existingPrompt={editingPrompt} onFormSubmit={() => { setView('list'); fetchData(); }} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PromptManagerModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}